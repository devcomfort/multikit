# 기능 명세: README 배지 생성

**기능 브랜치**: `002-readme-badges`  
**생성일**: 2026-02-19  
**상태**: 초안  
**입력**: 사용자 설명: "배지 스펙을 추가해줘. 커버리지 배지와 tox 배지를 만드는 방법을 명세화해야하는데, 구현은 테스트 로직을 완료하면 배지가 나오도록 하면 좋겠어."

## 사용자 시나리오 및 테스트 _(필수)_

### 사용자 스토리 1 - 프로젝트 상태를 한눈에 파악 (우선순위: P1)

기여자 또는 잠재적 사용자가 저장소 README를 방문했을 때, 상단 근처에서 두 개의 배지를 즉시 확인할 수 있다. 하나는 현재 테스트 커버리지 퍼센트를 보여주고, 다른 하나는 테스트 스위트를 통과한 것으로 검증된 Python 버전들을 보여준다. 방문자는 별도의 문서를 읽지 않고도 프로젝트의 품질과 호환성을 파악할 수 있다.

**이 우선순위인 이유**: 이것이 이 기능의 핵심 가치다. 테스트 결과를 README에 가시적이고 지속적인 상태 신호로 드러내는 것이며, 배지가 페이지에 나타나는 순간부터 독립적인 가치를 제공한다.

**독립 테스트**: GitHub에서 README를 열고 두 배지가 렌더링되어 있으며 가장 최근 CI 실행 결과와 일치하는 정확한 값을 표시하는지 확인하는 방법으로 완전히 테스트할 수 있다.

**인수 시나리오**:

1. **Given** CI 실행 성공 후 GitHub에서 README를 조회할 때, **When** 방문자가 페이지를 열면, **Then** 상단 근처에 90% 이상의 퍼센트를 표시하는 커버리지 배지가 보인다.
2. **Given** GitHub에서 README를 조회할 때, **When** 방문자가 Python 버전 배지를 확인하면, **Then** 수동 갱신 없이 지원하는 네 가지 버전(3.10, 3.11, 3.12, 3.13)이 모두 표시된다.
3. **Given** 테스트가 최소 커버리지 기준을 충족하지 못한 CI 실행 후, **When** README를 조회하면, **Then** 커버리지 배지가 실패 또는 기준 미달 상태(예: 빨간 색상 또는 명시적 실패 표시)를 명확히 반영한다.

---

### 사용자 스토리 2 - 테스트 완료 후 배지 자동 갱신 (우선순위: P2)

개발자가 테스트 커버리지를 91%에서 95%로 향상시키는 변경사항을 병합한다. 수동 작업 없이, 테스트를 실행한 동일한 CI 파이프라인 실행 내에서 README 페이지의 커버리지 배지가 95%를 반영하도록 자동 갱신된다.

**이 우선순위인 이유**: 테스트 결과와 배지 상태 간의 자동 동기화는 오래되거나 잘못된 정보가 표시될 위험을 제거한다. 이것이 기능을 신뢰할 수 있게 만드는 동작 요건이다.

**독립 테스트**: 테스트 커버리지를 변경하는 커밋을 푸시하고, CI 완료를 기다린 후, 수동 개입 없이 배지 값이 변경되었는지 확인하는 방법으로 완전히 테스트할 수 있다.

**인수 시나리오**:

1. **Given** CI에서 테스트 스위트가 성공적으로 완료될 때, **When** 파이프라인이 종료되면, **Then** 커버리지 배지 값이 동일 파이프라인 실행 내에서 측정된 커버리지와 일치하도록 갱신된다.
2. **Given** 마지막 실행 이후 코드 변경이 없을 때, **When** CI가 다시 실행되면, **Then** 배지는 이전과 동일한 값을 반영한다 (멱등 동작).
3. **Given** 커버리지가 최소 기준 이하로 떨어지는 커밋이 있을 때, **When** CI가 완료되면 (파이프라인 자체가 실패하지 않더라도), **Then** 배지는 저하된 상태를 반영한다.

---

### 사용자 스토리 3 - 로컬 실행 시 배지값 사전 확인 (우선순위: P3)

개발자가 푸시 전에 README에 어떤 배지 값이 표시될지 확인하고 싶어 로컬에서 테스트 스위트를 실행한다. 표준 테스트 명령을 실행하면 테스트 결과와 함께 배지 출력(예: 배지 파일 또는 콘솔 요약)이 생성되거나 미리보기로 표시된다.

**이 우선순위인 이유**: 로컬 검증은 개발과 CI 사이의 왕복 시간을 줄인다. 배지 핵심 기능에 필수는 아니지만 개발자 경험을 향상시킨다.

**독립 테스트**: 로컬 테스트 명령을 실행하고 CI 환경 없이도 커버리지 출력에 배지 관련 데이터(퍼센트 값)가 포함되는지 확인하는 방법으로 완전히 테스트할 수 있다.

**인수 시나리오**:

1. **Given** 개발자가 로컬에서 테스트 스위트를 실행할 때, **When** 테스트가 완료되면, **Then** 출력에 배지가 표시할 값에 대응하는 형태로 측정된 커버리지 퍼센트가 포함된다.
2. **Given** 개발자가 커버리지를 활성화하여 로컬에서 테스트 스위트를 실행할 때, **When** 커버리지 보고서 아티팩트가 생성되면, **Then** 해당 아티팩트가 추가 단계 없이 배지 생성의 충분한 입력 데이터가 된다.

---

### 엣지 케이스

- CI 파이프라인이 실행되었지만 테스트 결과를 사용할 수 없는 경우(예: 테스트 스킵)에는 어떻게 되는가?
- 커버리지 측정 단계가 테스트 단계와 독립적으로 실패하는 경우, 커버리지 배지는 어떤 값을 표시하는가?
- 해당 배지 갱신 없이 지원 매트릭스에 새로운 Python 버전이 추가될 경우, 버전 배지는 어떻게 동작하는가?
- 배지 서비스가 일시적으로 사용 불가능한 경우, README는 적절히 저하(fallback 이미지나 텍스트 표시 등)되는가?

## 요구사항 _(필수)_

### 기능 요구사항

- **FR-001**: README는 문서 상단 근처에 커버리지 배지를 표시해야 하며, 표준 데스크탑 브라우저에서 스크롤 없이 볼 수 있어야 한다.
- **FR-002**: README는 전체 테스트 스위트를 통과한 것으로 검증된 모든 버전을 반영하는 Python 버전 지원 배지를 표시해야 한다.
- **FR-003**: 커버리지 배지는 기여자의 수동 조작 없이 테스트 실행 파이프라인의 일부로 자동 갱신되어야 한다.
- **FR-004**: 커버리지 배지는 가장 최근 테스트 실행에서 측정된 정확한 커버리지 퍼센트를 표시해야 한다.
- **FR-005**: 버전 지원 배지는 프로젝트의 지원 Python 버전 범위(현재 3.10–3.13)를 정확히 반영해야 한다.
- **FR-006**: 테스트 커버리지가 최소 허용 기준(90%) 이하로 떨어지는 경우, 커버리지 배지는 실패 또는 저하 상태를 시각적으로 나타내야 하며 통과 상태와 명확히 구분되어야 한다.
- **FR-007**: 배지 갱신은 기존 테스트 실행 단계에 의해 트리거되어야 하며, 독립적인 유지보수가 필요한 별도의 배지 생성 단계가 있어서는 안 된다.
- **FR-008**: 배지 표시 형식은 기존 README 스타일과 일관되어야 하며 GitHub의 README 뷰어에서 올바르게 렌더링되어야 한다.

## 성공 기준 _(필수)_

### 측정 가능한 결과

- **SC-001**: 테스트 스위트가 최초 구성된 후 하나의 CI 파이프라인 실행 내에서 두 배지(커버리지 및 버전 지원)가 README에 표시되어야 하며, 이후 실행마다 수동 README 편집이 필요하지 않아야 한다.
- **SC-002**: 커버리지 배지 값은 실제 테스트 실행 출력과 ±1% 이내로 일치해야 한다.
- **SC-003**: 버전 지원 배지는 릴리스마다 수동 유지보수 없이 지원하는 4개의 Python 버전(3.10, 3.11, 3.12, 3.13)을 올바르게 나열해야 한다.
- **SC-004**: 코드 변경을 한 기여자는 CI 실행 완료 후 10분 이내에 README 페이지만으로 배지 상태가 최신임을 확인할 수 있어야 한다.
- **SC-005**: 커버리지가 90% 아래로 떨어지면 임계값을 모르는 열람자도 기준 통과 상태와 명확히 구분할 수 있도록 커버리지 배지가 상태(색상, 라벨 또는 아이콘)를 변경해야 한다.

## 가정

- 프로젝트의 CI 파이프라인은 GitHub Actions에서 실행되며, 모든 푸시 및 풀 리퀘스트에서 지원하는 모든 Python 버전(3.10–3.13)을 대상으로 전체 테스트 스위트를 실행한다.
- 테스트 커버리지 측정은 이미 테스트 실행 단계에 통합되어 있다 (fail_under 임계값이 90%인 pytest-cov 사용).
- README에는 현재 배지가 없으며, 배지는 프로젝트 제목과 첫 번째 설명 섹션 사이의 상단에 추가된다.
- Python 버전 지원 범위는 자주 변경되지 않으므로, 버전 배지는 지원 범위가 공식적으로 변경될 때(예: 3.10 지원 종료 또는 3.14 추가)에만 수동으로 갱신되는 것으로 예상된다.
- 배지 렌더링은 외부 배지 서비스(예: Shields.io 또는 커버리지 서비스)에서 처리되며, 자체 호스팅 배지 인프라는 필요하지 않다.
